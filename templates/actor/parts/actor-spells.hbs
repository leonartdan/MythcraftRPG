{{!-- Actor Spells Partial --}}
<div class="spells-section">
  <h3 class="items-header">
    <span>Spells</span>
    <a class="item-control item-create" data-type="spell" title="Create spell">
      <i class="fas fa-plus"></i>
    </a>
  </h3>

  {{!-- Magic Sources --}}
  <div class="magic-sources">
    <h4>Magic Sources</h4>
    <div class="grid grid-5col">
      {{#each system.magicSources as |enabled source|}}
      <label class="checkbox" style="color: {{magicSourceColor source}}">
        <input type="checkbox" name="system.magicSources.{{source}}" {{checked enabled}}/>
        {{capitalize source}}
      </label>
      {{/each}}
    </div>
  </div>

  {{!-- Spell Lists by Source --}}
  {{#each spells as |spellList source|}}
    {{#if spellList.length}}
    <div class="spell-list" data-source="{{source}}">
      <h4 style="color: {{magicSourceColor source}}">{{capitalize source}} Spells</h4>
      <ol class="items-list">
        <li class="item flexrow item-header">
          <div class="item-name">Name</div>
          <div class="item-controls">Level</div>
          <div class="item-controls">School</div>
          <div class="item-controls">AP Cost</div>
          <div class="item-controls">Actions</div>
        </li>
        {{#each spellList as |item id|}}
        <li class="item flexrow" data-item-id="{{item._id}}">
          <div class="item-name">
            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
            <h4>{{item.name}}</h4>
            {{#if item.system.components}}
            <div class="spell-components">
              {{#if item.system.components.verbal}}<span class="component" title="Verbal">V</span>{{/if}}
              {{#if item.system.components.somatic}}<span class="component" title="Somatic">S</span>{{/if}}
              {{#if item.system.components.material}}<span class="component" title="Material">M</span>{{/if}}
              {{#if item.system.components.focus}}<span class="component" title="Focus">F</span>{{/if}}
            </div>
            {{/if}}
          </div>
          <div class="item-controls">
            {{spellLevel item.system.level}}
          </div>
          <div class="item-controls">
            {{capitalize item.system.school}}
          </div>
          <div class="item-controls">
            {{apCost item.system.actionCost}}
          </div>
          <div class="item-controls">
            <a class="item-control item-roll" data-roll-type="spell" title="Cast Spell"><i class="fas fa-magic"></i></a>
            {{#if item.system.damage.parts.length}}
            <a class="item-control item-roll" data-roll-type="damage" title="Roll Damage"><i class="fas fa-dice"></i></a>
            {{/if}}
            <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
            <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>
    </div>
    {{/if}}
  {{/each}}

  {{#unless (gt (add spells.arcane.length spells.divine.length spells.occult.length spells.primal.length spells.psionic.length) 0)}}
  <div class="empty-spells">
    <p><em>No spells learned. Add spells using the + button above.</em></p>
  </div>
  {{/unless}}

</div>